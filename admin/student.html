<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Smart School System - Validate</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="../assets/css/studentList.css">
</head>
<body>

    <header class="header">
        <div class="header-left">
            <i class="fas fa-bars menu-toggle-icon" id="menu-toggle"></i>
            <span>Smart School System</span>
        </div>
        <div class="header-right">
            <span class="user-name">Admin</span>
            <img src="../assets/image/adminICON.png" alt="Admin Profile" class="profile-image">
        </div>
    </header>

<div class="main-container">
        <aside class="sidebar" id="sidebar">
            <ul class="sidebar-menu">
                <li><a href="adminHomepage.html" class="menu-item "><i class="fas fa-home icon"></i> <span class="link-text">Home</span></a></li>
                <li><a href="classList.html" class="menu-item"><i class="fas fa-chalkboard icon"></i> <span class="link-text">Class</span></a></li>
                <li><a href="student.html" class="menu-item active"><i class="fas fa-user-graduate icon"></i> <span class="link-text">Student</span></a></li>
                <li><a href="validateTeacher.html" class="menu-item"><i class="fas fa-user-check icon"></i> <span class="link-text">Validate</span></a></li>
                <li><a href="teacherList.html" class="menu-item"><i class="fas fa-users-rectangle icon"></i> <span class="link-text">Teacher List</span></a></li>
            </ul>
        </aside>

   <main class="content">
            <div class="page-header-row">
                <div class="breadcrumb">
                    Hi, Syariful <span class="breadcrumb-separator">&gt;</span> <span class="current-page">Student</span>
                </div>
                <div class="page-label">Student</div>
            </div>

            <div class="content-card">
                
                <div class="controls-container">
                    <div class="control-group">
                        <label>Year</label>
                        <select class="form-select">
                            <option value="4">4</option>
                            <option value="5">5</option>
                            <option value="6">6</option>
                        </select>
                    </div>
                    
                    <div class="search-wrapper">
                        <input type="text" class="search-input" value="Syarif bin Azhar" placeholder="Search...">
                        <i class="fas fa-search search-icon"></i>
                    </div>
                </div>

                <div class="table-scroll-wrapper">
                    <table class="data-table student-table">
                        <thead>
                            <tr>
                                <th style="width: 5%;">No.</th>
                                <th style="width: 20%;">Name</th>
                                <th style="width: 15%;">IC Number</th>
                                <th style="width: 15%;">Class</th>
                                <th style="width: 20%;">Address</th>
                                <th style="width: 8%;">Gender</th>
                                <th style="width: 12%;">Date of Birth</th>
                                <th style="width: 5%; text-align: center;">Action</th>
                            </tr>
                        </thead>
                        <tbody id="studentTableBody">
                            <tr>
                                <td class="row-number">1</td>
                                <td>Aina binti Jamil</td>
                                <td>140814106028</td>
                                <td>4 Ibnu Khaldun</td>
                                <td>Jalan Taman Melati</td>
                                <td>Female</td>
                                <td>14/08/2014</td>
                                <td class="text-center"><i class="fas fa-trash-can icon-delete" onclick="deleteSingleStudent(this)"></i></td>
                            </tr>
                            <tr>
                                <td class="row-number">2</td>
                                <td>Aqilah binti Maznan</td>
                                <td>140126106412</td>
                                <td>4 Ibnu Khaldun</td>
                                <td>Jalan Kampung Setia</td>
                                <td>Female</td>
                                <td>26/01/2014</td>
                                <td class="text-center"><i class="fas fa-trash-can icon-delete" onclick="deleteSingleStudent(this)"></i></td>
                            </tr>
                            <tr>
                                <td class="row-number">3</td>
                                <td>Arif bin Aiman</td>
                                <td>140321105033</td>
                                <td>4 Ibnu Khaldun</td>
                                <td>Jalan Tun Abdul</td>
                                <td>Male</td>
                                <td>21/03/2014</td>
                                <td class="text-center"><i class="fas fa-trash-can icon-delete" onclick="deleteSingleStudent(this)"></i></td>
                            </tr>
                            <tr>
                                <td class="row-number">4</td>
                                <td>Faris bin Imran</td>
                                <td>140707105081</td>
                                <td>4 Ibnu Khaldun</td>
                                <td>B05-4, Kampung Air</td>
                                <td>Male</td>
                                <td>07/07/2014</td>
                                <td class="text-center"><i class="fas fa-trash-can icon-delete" onclick="deleteSingleStudent(this)"></i></td>
                            </tr>
                            <tr>
                                <td class="row-number">5</td>
                                <td>Kamil bin Nahar</td>
                                <td>141119105197</td>
                                <td>4 Ibnu Khaldun</td>
                                <td>No 31A, Jalan Setia</td>
                                <td>Male</td>
                                <td>19/11/2014</td>
                                <td class="text-center"><i class="fas fa-trash-can icon-delete" onclick="deleteSingleStudent(this)"></i></td>
                            </tr>
                            <tr>
                                <td class="row-number">6</td>
                                <td>Syarif bin Azhar</td>
                                <td>140502105294</td>
                                <td>4 Ibnu Khaldun</td>
                                <td>Jalan Telok Emas 1</td>
                                <td>Male</td>
                                <td>02/05/2014</td>
                                <td class="text-center"><i class="fas fa-trash-can icon-delete" onclick="deleteSingleStudent(this)"></i></td>
                            </tr>
                             <tr><td>&nbsp;</td><td></td><td></td><td></td><td></td><td></td><td></td><td></td></tr>
                             <tr><td>&nbsp;</td><td></td><td></td><td></td><td></td><td></td><td></td><td></td></tr>
                        </tbody>
                    </table>
                </div>

                <div class="card-footer">
                    <button class="btn-grey">new student</button>
                    <button class="btn-red" onclick="deleteAllStudents()">Delete All</button>
                </div>
            </div>
        </main>
    </div>

<div id="deleteConfirmModal" class="modal-overlay">
        <div class="modal-box">
            <h3>Are You Sure ?</h3>
            <p id="modalMessage" style="color: #000080; font-weight: 500;">Do you want to delete this student?</p>
            
            <div class="modal-buttons">
                <button class="modal-btn btn-cancel" onclick="closeModals()">Cancel</button>
                <button class="modal-btn btn-red" onclick="confirmDelete()">Delete</button>
            </div>
        </div>
    </div>

    <div id="successModal" class="modal-overlay">
        <div class="modal-box success-box">
            <p id="successMessage">Student Deleted Successfully !</p>
        </div>
    </div>


<script>
        // Sidebar Toggle
        const toggleButton = document.getElementById('menu-toggle');
        const sidebar = document.getElementById('sidebar');
        toggleButton.addEventListener('click', () => {
            sidebar.classList.toggle('collapsed');
        });

        // --- DELETE LOGIC ---
        const confirmModal = document.getElementById('deleteConfirmModal');
        const successModal = document.getElementById('successModal');
        const modalMessage = document.getElementById('modalMessage');
        const successMessage = document.getElementById('successMessage');
        const tableBody = document.getElementById('studentTableBody');

        // Variables to track what we are deleting
        let rowToDelete = null; // Stores the specific row if deleting one
        let isDeleteAll = false; // Check if we are deleting everything

        // 1. Function for Single Row Delete (Clicked the Trash Icon)
        function deleteSingleStudent(element) {
            isDeleteAll = false;
            // Find the row (tr) that contains the clicked icon
            rowToDelete = element.closest('tr');
            
            // Set Modal Text
            modalMessage.innerText = "Do you want to delete this student?";
            confirmModal.style.display = 'flex';
        }

        // 2. Function for Delete All (Clicked the Red Button)
        function deleteAllStudents() {
            isDeleteAll = true;
            rowToDelete = null;
            
            // Set Modal Text
            modalMessage.innerText = "Do you want to delete all students?";
            confirmModal.style.display = 'flex';
        }

        // 3. Close Modals
        function closeModals() {
            confirmModal.style.display = 'none';
            successModal.style.display = 'none';
            rowToDelete = null;
        }

        // 4. Execute Delete (Clicked "Delete" in Popup)
        function confirmDelete() {
            confirmModal.style.display = 'none';

            if (isDeleteAll) {
                // DELETE ALL LOGIC
                tableBody.innerHTML = '';
                // Add empty rows for visual layout (optional)
                for(let i=0; i<8; i++) {
                    let row = tableBody.insertRow();
                    for(let j=0; j<8; j++) row.insertCell().innerHTML = '&nbsp;';
                }
                successMessage.innerText = "Students Deleted Successfully !";
            } 
            else if (rowToDelete) {
                // DELETE SINGLE ROW LOGIC
                rowToDelete.remove();
                renumberRows(); // Fix the "No." column (1, 2, 3...)
                successMessage.innerText = "Student Deleted Successfully !";
            }

            // Show Success Message
            successModal.style.display = 'flex';
            setTimeout(() => {
                successModal.style.display = 'none';
            }, 2000);
        }

        // Helper function to re-order the numbers after deleting a row
        function renumberRows() {
            const rows = tableBody.querySelectorAll('tr');
            let count = 1;
            rows.forEach(row => {
                // Only number rows that actually have data (check if they have a .row-number cell)
                const numberCell = row.querySelector('.row-number');
                if (numberCell) {
                    numberCell.innerText = count++;
                }
            });
        }

        // Close modal if clicking outside
        window.onclick = function(event) {
            if (event.target == confirmModal || event.target == successModal) {
                closeModals();
            }
        }
    </script>
</body>
</html>